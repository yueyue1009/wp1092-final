{"ast":null,"code":"import _regeneratorRuntime from\"/Users/zhengshipeng/Desktop/NS/wp1092-final/app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/zhengshipeng/Desktop/NS/wp1092-final/app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/zhengshipeng/Desktop/NS/wp1092-final/app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/zhengshipeng/Desktop/NS/wp1092-final/app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{shortDate}from'./utils';import{getGameByDate}from'../api';import{useEffect,useState,React}from'react';import{Paper,Button,Grid,Typography,Modal,TextField}from'@material-ui/core';import{makeStyles}from'@material-ui/core';import{newBet}from'../api';import LOGOS from'../logos';import CompetitionRecord from'./CompetitionRecord';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{modal:{position:'relative',width:380,backgroundColor:theme.palette.background.paper,border:'2px solid #000',boxShadow:theme.shadows[5],padding:theme.spacing(2,4,3),top:'50%',left:'50%'}};});function BetContent(_ref){var game=_ref.game,setGame=_ref.setGame,user=_ref.user,setUser=_ref.setUser,isLogin=_ref.isLogin;var classes=useStyles();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),betAmount=_useState2[0],setBetAmount=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),visitorModalOpen=_useState4[0],setVisitorModalOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),homeModalOpen=_useState6[0],setHomeModalOpen=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),hintText=_useState8[0],setHintText=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),visitorOdds=_useState10[0],setVisitorOdds=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),homeOdds=_useState12[0],setHomeOdds=_useState12[1];var handleChange=function handleChange(func){return function(event){func(event.target.value);};};var handleVisitorClose=function handleVisitorClose(){setVisitorModalOpen(false);};var handleVisitorOpen=function handleVisitorOpen(){setVisitorModalOpen(true);};var handleHomeClose=function handleHomeClose(){setHomeModalOpen(false);};var handleHomeOpen=function handleHomeOpen(){setHomeModalOpen(true);};var updateOdds=function updateOdds(){setVisitorOdds((game.homebets/game.awaybets).toFixed(2));setHomeOdds((game.awaybets/game.homebets).toFixed(2));};var handleBet=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(type){var _yield$newBet,data,newGame;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(betAmount===\"\")){_context.next=3;break;}setHintText(\"Enter an amount!\");return _context.abrupt(\"return\");case 3:if(!(Number(betAmount)>user.money)){_context.next=6;break;}setHintText(\"Out of range. You only have $\".concat(user.money,\" left.\"));return _context.abrupt(\"return\");case 6:_context.next=8;return newBet(user.name,game.gameID,type,Number(betAmount));case 8:_yield$newBet=_context.sent;data=_yield$newBet.data;if(data.type===\"success\"){setHintText(\"Successfully placed a bet!\");setBetAmount(\"\");setUser(_objectSpread(_objectSpread({},user),{},{money:data.money,betCount:user.betCount+1}));newGame=game;newGame.awaybets=data.awaybets;newGame.homebets=data.homebets;setGame(newGame);updateOdds();}else if(data.type===\"error\"){setHintText(data.message);}case 11:case\"end\":return _context.stop();}}},_callee);}));return function handleBet(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){updateOdds();},[game]);return/*#__PURE__*/_jsxs(Grid,{item:true,container:true,xs:6,direction:\"column\",children:[/*#__PURE__*/_jsxs(Grid,{item:true,container:true,direction:\"row\",children:[/*#__PURE__*/_jsxs(Grid,{container:true,xs:6,align:\"center\",direction:\"column\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"AWAY\"})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{style:{fontSize:'22px'},children:game.visitorTeam})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(\"img\",{src:LOGOS[game.visitorTeamAbbr],style:{width:\"100px\"}})}),game.gameStatus===\"Todo\"?isLogin?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[\"Odds:\",visitorOdds]}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:handleVisitorOpen,children:\"Place a bet!\"})}),/*#__PURE__*/_jsx(Modal,{open:visitorModalOpen,onClose:handleVisitorClose,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.modal,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",style:{fontSize:\"120%\",fontWeight:\"bold\"},children:\"Type in the amount you want to bet\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"or click anywhere to cancel\"}),/*#__PURE__*/_jsx(TextField,{size:\"small\",variant:\"outlined\",value:betAmount,onChange:handleChange(setBetAmount),type:\"number\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:hintText}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:function onClick(){return handleBet(\"away\");},children:\"Bet!\"})]})})]}):/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[\"Odds:\",visitorOdds]}),/*#__PURE__*/_jsx(Typography,{color:\"primary\",variant:\"h6\",children:\" Login to bet!\"})]}):game.gameStatus==='Final'?/*#__PURE__*/_jsxs(Grid,{item:true,children:[game.visitorTeamScore>game.homeTeamScore?/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",style:{color:\"#4ef5ad\"},children:[\"W \",game.visitorTeamScore]}):/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",style:{color:\"#9e0214\"},children:[\"L \",game.visitorTeamScore]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[\"Odds:\",visitorOdds]})]}):/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:game.visitorTeamScore})})]}),/*#__PURE__*/_jsxs(Grid,{container:true,item:true,xs:6,align:\"center\",direction:\"column\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"HOME\"})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{style:{fontSize:'22px'},children:game.homeTeam})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(\"img\",{src:LOGOS[game.homeTeamAbbr],style:{width:\"100px\"}})}),game.gameStatus===\"Todo\"?isLogin?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[\"Odds:\",homeOdds]}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:handleHomeOpen,children:\"Place a bet!\"})}),/*#__PURE__*/_jsx(Modal,{open:homeModalOpen,onClose:handleHomeClose,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.modal,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",style:{fontSize:\"120%\",fontWeight:\"bold\"},children:\"Type in the amount you want to bet\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"or click anywhere to cancel\"}),/*#__PURE__*/_jsx(TextField,{size:\"small\",variant:\"outlined\",value:betAmount,onChange:handleChange(setBetAmount),type:\"number\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:hintText}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:function onClick(){return handleBet(\"home\");},children:\"Bet!\"})]})})]}):/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[\"Odds:\",homeOdds]}),/*#__PURE__*/_jsx(Typography,{color:\"primary\",variant:\"h6\",children:\" Login to bet!\"})]}):game.gameStatus==='Final'?/*#__PURE__*/_jsxs(Grid,{item:true,children:[game.visitorTeamScore<game.homeTeamScore?/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",style:{color:\"#4ef5ad\"},children:[\"W \",game.homeTeamScore]}):/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",style:{color:\"#9e0214\"},children:[\"L \",game.homeTeamScore]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[\"Odds:\",visitorOdds]})]}):/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:game.homeTeamScore})})]})]}),game.gameStatus!=='Final'?/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(CompetitionRecord,{home:game.homeTeamAbbr,visitor:game.visitorTeamAbbr})}):/*#__PURE__*/_jsx(_Fragment,{})]});}export default BetContent;","map":{"version":3,"sources":["/Users/zhengshipeng/Desktop/NS/wp1092-final/app/frontend/src/components/BetContent.js"],"names":["shortDate","getGameByDate","useEffect","useState","React","Paper","Button","Grid","Typography","Modal","TextField","makeStyles","newBet","LOGOS","CompetitionRecord","useStyles","theme","modal","position","width","backgroundColor","palette","background","paper","border","boxShadow","shadows","padding","spacing","top","left","BetContent","game","setGame","user","setUser","isLogin","classes","betAmount","setBetAmount","visitorModalOpen","setVisitorModalOpen","homeModalOpen","setHomeModalOpen","hintText","setHintText","visitorOdds","setVisitorOdds","homeOdds","setHomeOdds","handleChange","func","event","target","value","handleVisitorClose","handleVisitorOpen","handleHomeClose","handleHomeOpen","updateOdds","homebets","awaybets","toFixed","handleBet","type","Number","money","name","gameID","data","betCount","newGame","message","fontSize","visitorTeam","visitorTeamAbbr","gameStatus","fontWeight","visitorTeamScore","homeTeamScore","color","homeTeam","homeTeamAbbr"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\nimport { shortDate } from './utils';\nimport { getGameByDate } from '../api'\nimport { useEffect, useState, React} from 'react';\nimport { Paper, Button, Grid, Typography, Modal, TextField } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core';\nimport { newBet } from '../api';\nimport LOGOS from '../logos';\nimport CompetitionRecord from './CompetitionRecord';\n\n\nconst useStyles = makeStyles((theme) => ({\n  modal: {\n    position: 'relative',\n    width: 380,\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n    top: '50%',\n    left: '50%'\n  },\n}));\n\n\n\nfunction BetContent({ game, setGame, user, setUser, isLogin}){\n  const classes = useStyles();\n  const [betAmount, setBetAmount] = useState(\"\");\n  const [visitorModalOpen, setVisitorModalOpen] = useState(false);\n  const [homeModalOpen, setHomeModalOpen] = useState(false);\n  const [hintText, setHintText] = useState(\"\");\n  const [visitorOdds, setVisitorOdds] = useState(0);\n  const [homeOdds, setHomeOdds] = useState(0);\n  const handleChange = (func) => (event) => {\n    func(event.target.value);\n  };\n  const handleVisitorClose = () => {\n    setVisitorModalOpen(false);\n  };\n  const handleVisitorOpen = () => {\n    setVisitorModalOpen(true);\n  };\n  const handleHomeClose = () => {\n    setHomeModalOpen(false);\n  };\n  const handleHomeOpen = () => {\n    setHomeModalOpen(true);\n  };\n  const updateOdds = () => {\n    setVisitorOdds((game.homebets / game.awaybets).toFixed(2));\n    setHomeOdds((game.awaybets / game.homebets).toFixed(2));\n  }\n  const handleBet = async (type) =>{\n    if (betAmount === \"\") {\n      setHintText(\"Enter an amount!\")\n      return;\n    }\n    if (Number(betAmount) > user.money) {\n      setHintText(`Out of range. You only have $${user.money} left.`)\n      return;\n    }\n    const { data } = await newBet(user.name, game.gameID, type, Number(betAmount));\n    if (data.type === \"success\") {\n      setHintText(\"Successfully placed a bet!\");\n      setBetAmount(\"\");\n      setUser({...user, money: data.money, betCount: user.betCount+1});\n      let newGame = game;\n      newGame.awaybets = data.awaybets;\n      newGame.homebets = data.homebets;\n      setGame(newGame);\n      updateOdds();\n    }\n    else if (data.type === \"error\") {\n      setHintText(data.message);\n    }\n  }\n  useEffect(()=>{\n    updateOdds();\n  },[game])\n  return (\n    <Grid item container xs={6} direction='column'>\n      <Grid item container direction='row'>\n        <Grid container xs={6} align=\"center\" direction=\"column\">\n          <br></br>\n          <Grid item>\n            <Typography variant='h6'>AWAY</Typography>\n          </Grid>\n          <Grid item>\n            <Typography style={{ fontSize: '22px' }}>{game.visitorTeam}</Typography>\n          </Grid>\n          <Grid item>\n            <img src={LOGOS[game.visitorTeamAbbr]} style={{ width: \"100px\" }} />\n          </Grid>\n          {(game.gameStatus === \"Todo\")? \n            ((isLogin) ? (\n              <>\n                <br></br>\n                <Typography variant=\"body1\">Odds:{visitorOdds}</Typography>\n                <Grid item>\n                  <Button variant=\"outlined\" onClick={handleVisitorOpen}>Place a bet!</Button>\n                </Grid>\n                <Modal open={visitorModalOpen} onClose={handleVisitorClose}>\n                  <div className={classes.modal}>\n                    <Typography variant=\"h6\" style={{ fontSize: \"120%\", fontWeight: \"bold\" }}>Type in the amount you want to bet</Typography>\n                    <Typography variant=\"body1\">or click anywhere to cancel</Typography>\n                    <TextField size=\"small\" variant=\"outlined\" value={betAmount} onChange={handleChange(setBetAmount)} type=\"number\"/>\n                    <Typography variant=\"body2\">{hintText}</Typography>\n                    <Button variant=\"outlined\" onClick={() => handleBet(\"away\")}>Bet!</Button>\n                  </div>\n\n                </Modal>\n\n              </>\n            ) : (\n                <Grid item>\n                  <br></br>\n                  <Typography variant=\"body1\">Odds:{visitorOdds}</Typography>\n                  <Typography color=\"primary\" variant=\"h6\"> Login to bet!</Typography>\n                </Grid>\n            )) : (game.gameStatus === 'Final') ? (\n              <Grid item>\n                {(game.visitorTeamScore > game.homeTeamScore)?\n                  <Typography variant=\"h4\" style={{ color:\"#4ef5ad\"}}>W {game.visitorTeamScore}</Typography> :\n                  <Typography variant=\"h4\" style={{ color: \"#9e0214\" }}>L {game.visitorTeamScore}</Typography>\n                }\n                <Typography variant=\"body1\">Odds:{visitorOdds}</Typography>\n              </Grid>\n            ):(\n              <Grid item>\n                  <Typography variant=\"h4\">{game.visitorTeamScore}</Typography>\n              </Grid>\n            )}\n        </Grid>\n        <Grid container item xs={6} align=\"center\" direction=\"column\">\n          <br></br>\n          <Grid item>\n            <Typography variant='h6'>HOME</Typography>\n          </Grid>\n          <Grid item>\n            <Typography style={{ fontSize: '22px' }}>{game.homeTeam}</Typography>\n          </Grid>\n          <Grid item>\n            <img src={LOGOS[game.homeTeamAbbr]} style={{ width: \"100px\" }} />\n          </Grid>\n          {(game.gameStatus === \"Todo\") ?\n            ((isLogin) ? (\n              <>\n                <br></br>\n                <Typography variant=\"body1\">Odds:{homeOdds}</Typography>\n                <Grid item>\n                  <Button variant=\"outlined\" onClick={handleHomeOpen}>Place a bet!</Button>\n                </Grid>\n                <Modal open={homeModalOpen} onClose={handleHomeClose}>\n                  <div className={classes.modal}>\n                    <Typography variant=\"h6\" style={{ fontSize: \"120%\", fontWeight: \"bold\" }}>Type in the amount you want to bet</Typography>\n                    <Typography variant=\"body1\">or click anywhere to cancel</Typography>\n                    <TextField size=\"small\" variant=\"outlined\" value={betAmount} onChange={handleChange(setBetAmount)} type=\"number\"/>\n                    <Typography variant=\"body2\">{hintText}</Typography>\n                    <Button variant=\"outlined\" onClick={() => handleBet(\"home\")}>Bet!</Button>\n                  </div>\n                </Modal>\n              </>\n            ) : (\n                <Grid item>\n                  <br></br>\n                  <Typography variant=\"body1\">Odds:{homeOdds}</Typography>\n                  <Typography color=\"primary\" variant=\"h6\"> Login to bet!</Typography>\n                </Grid>\n            )) : (game.gameStatus === 'Final')? (\n              <Grid item>\n                {(game.visitorTeamScore < game.homeTeamScore) ?\n                  <Typography variant=\"h4\" style={{ color: \"#4ef5ad\" }}>W {game.homeTeamScore}</Typography> :\n                  <Typography variant=\"h4\" style={{ color: \"#9e0214\" }}>L {game.homeTeamScore}</Typography>\n                }\n                <Typography variant=\"body1\">Odds:{visitorOdds}</Typography>\n              </Grid>\n            ) : (\n              <Grid item>\n                <Typography variant=\"h4\">{game.homeTeamScore}</Typography>\n              </Grid>\n            )}\n        </Grid>\n      </Grid>\n      {(game.gameStatus !== 'Final') ? (\n        <Grid item>\n          <CompetitionRecord home={game.homeTeamAbbr} visitor={game.visitorTeamAbbr} />\n        </Grid>\n      ) : (\n        <></>\n      )\n      }\n    </Grid>\n  )\n}\nexport default BetContent;\n"]},"metadata":{},"sourceType":"module"}